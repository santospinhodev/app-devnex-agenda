Documento 1 Product Vision Document (PVD)
Produto: Devnex Agenda
Vers√£o: 1.0
Respons√°vel: Rodrigo Santos ‚Äî CEO & Gerente de Projeto
Empresa: Devnex Solutions

1. Vis√£o Geral do Produto
   O Devnex Agenda √© uma plataforma mobile-first criada para barbearias e profissionais aut√¥nomos que precisam de velocidade, simplicidade e automa√ß√£o no processo de agendamento, atendimento e controle financeiro.
   Seu foco central √© remover fric√ß√µes presentes nos sistemas tradicionais e oferecer uma experi√™ncia de agendamento em 2‚Äì3 toques, tanto para barbeiros quanto para clientes.

2. Problema que o Produto Resolve
   Barbearias enfrentam diariamente:
   Sistemas lentos, pesados e n√£o otimizados para celular

Clientes que esquecem hor√°rios (no-show alto)

Falta de automa√ß√£o e precis√£o no controle financeiro

Processos de agendamento demorados

Interfaces cheias de telas e passos desnecess√°rios

Falta de organiza√ß√£o e falta de previsibilidade da agenda

O Devnex Agenda elimina esses gargalos ao criar uma solu√ß√£o projetada 100% para uso no celular, com foco extremo em rapidez operacional.

3. Proposta de Valor (USP)
   ‚ÄúA agenda mais r√°pida e inteligente para barbeiros.‚Äù
   Agendamentos feitos com 2‚Äì3 toques

Cliente agenda e re-agenda em menos de 5 segundos

Automa√ß√µes inteligentes que aprendem padr√µes da barbearia

Notifica√ß√µes via WhatsApp que reduzem drasticamente no-show

Painel do barbeiro ultra objetivo, enxuto e r√°pido

4. Objetivos do Produto
   Aumentar efici√™ncia operacional da barbearia

Menos tempo perdido em agendamento

Menos erros de hor√°rio

Reduzir drasticamente o no-show

Confirma√ß√£o autom√°tica + lembretes WhatsApp

Aumentar receita por profissional

Mais atendimentos preenchidos

Controle financeiro claro

Criar uma experi√™ncia encantadora para o usu√°rio

Simples, r√°pida, fluida

PWA/App que funciona em qualquer telefone

5. P√∫blico-Alvo
   Profissionais
   Barbeiros

Cabeleireiros

Profissionais aut√¥nomos da beleza

Neg√≥cios
Barbearias de pequeno a m√©dio porte

Sal√µes com v√°rios profissionais

Clientes finais
Usu√°rios que querem agendar com facilidade, sem telefone, sem fric√ß√£o e sem senha.

6. Principais Benef√≠cios
   Para o barbeiro:
   Agendamento instant√¢neo

Painel di√°rio ultra r√°pido

Controle financeiro simples

Hist√≥rico de clientes r√°pido

Diminui√ß√£o de ‚Äúdesmarca√ß√£o de √∫ltima hora‚Äù

Para o cliente:
Agendamento r√°pido

Sem senha (WhatsApp login)

Hist√≥rico e re-agendamento f√°cil

7. Diferencial Competitivo
   O Devnex Agenda se posiciona como a solu√ß√£o mais r√°pida do mercado, baseada em 3 pilares:
1. Mobile-First Real
   Telas, componentes e navega√ß√£o feitos exclusivamente para uso no celular.
   Nada de interfaces adaptadas do desktop.
1. Agenda Smart (Inteligente)
   Sugere hor√°rios mais prov√°veis

Preenche dura√ß√£o automaticamente

Aprende padr√µes semanais

Sugere servi√ßos mais utilizados

3. Automa√ß√µes Inteligentes
   Notifica√ß√µes WhatsApp integradas

Fluxos autom√°ticos de confirma√ß√£o

Lembretes e alertas inteligentes

8. M√©tricas de Sucesso (KPIs)
   Redu√ß√£o do no-show (meta: -50%)

Tempo m√©dio para criar um agendamento (meta: < 5 segundos)

Engajamento di√°rio do barbeiro (meta: > 70%)

Taxa de re-agendamentos pelo cliente

Crescimento org√¢nico via convite WhatsApp

9. Premissas
   O foco inicial √© mobile

A agenda √© o cora√ß√£o do sistema

O MVP precisa ser enxuto e funcional

O barbeiro deve resolver 80% do seu dia na tela principal

Reduzir toques, telas e carga cognitiva √© prioridade absoluta

10. Declara√ß√£o de Vis√£o
    ‚ÄúCriar a plataforma de agendamentos mais r√°pida, inteligente e simples do mercado para profissionais da beleza ‚Äî come√ßando pelos barbeiros.‚Äù

Documento 2 Escopo Oficial do MVP (Mobile-First)
Produto: Devnex Agenda
Vers√£o: 1.0
Respons√°vel: Rodrigo Santos ‚Äî CEO & Gerente de Projeto

1. Objetivo do MVP
   Construir um sistema mobile-first que permita a barbeiros e clientes:
   Agendar servi√ßos de maneira ultra r√°pida

Reduzir no-show com automa√ß√µes via WhatsApp

Controlar o financeiro essencial

Operar 100% pelo celular, sem complexidade

O MVP deve ser funcional, enxuto e preparado para escalar.

2. Funcionalidades Essenciais do MVP
   As 5 funcionalidades centrais definidas para o MVP s√£o:

2.1. Agenda Inteligente e R√°pida (Barbeiro)
Funcionalidades:
Criar hor√°rio com 1 toque (‚Äú+ Hor√°rio‚Äù)

Editar hor√°rio com 1 toque

Excluir hor√°rio com confirma√ß√£o r√°pida

Bloqueio de hor√°rios

Recorr√™ncia simples (ex.: toda semana mesmo hor√°rio)

Visualiza√ß√£o di√°ria e semanal compacta

A√ß√£o r√°pida: ‚ÄúAdicionar cliente ao hor√°rio‚Äù

Regras de Neg√≥cio:
Cada hor√°rio tem: cliente, servi√ßo, dura√ß√£o, status, observa√ß√µes

Quando o barbeiro abre o app, a Agenda do Dia √© exibida imediatamente

A sugest√£o de hor√°rio √© autom√°tica:

Com base no √∫ltimo hor√°rio

Com base na dura√ß√£o do servi√ßo escolhido

2.2. Agendamento Online (Cliente)
Funcionalidades:
Cliente seleciona: profissional ‚Üí servi√ßo ‚Üí hor√°rio ‚Üí confirmar

Login ultra simples via WhatsApp (sem senha)

Hist√≥rico de agendamentos

Reagendamento com 1 toque

Regras de Neg√≥cio:
O cliente s√≥ v√™ hor√°rios dispon√≠veis

Confirma√ß√£o √© enviada via WhatsApp

Cancelamentos s√≥ podem ser feitos at√© X horas antes (configur√°vel na V2, fixo no MVP)

2.3. Notifica√ß√µes Autom√°ticas via WhatsApp
Tipos de Notifica√ß√µes:
Confirma√ß√£o autom√°tica

Lembrete antes do hor√°rio

Atraso/cancelamento pelo barbeiro

Regras de Neg√≥cio:
O sistema precisa de integra√ß√£o com API de WhatsApp Business

Lembrete padr√£o: 1 hora antes

Logs de todas notifica√ß√µes devem ser registrados

2.4. Gest√£o Financeira Essencial
Funcionalidades:
Registro r√°pido de servi√ßos finalizados

Resumo de caixa di√°rio

C√°lculo autom√°tico de comiss√£o por profissional

Regras de Neg√≥cio:
Cada servi√ßo finalizado gera um registro financeiro

Comiss√£o √© calculada com % fixa por profissional

Caixa di√°rio mostra:

total do dia

entradas

sa√≠das

saldo final

2.5. Painel Simplificado do Barbeiro
Funcionalidades:
Lista do dia: clientes, servi√ßos, hor√°rios, valores

Marcar ‚ÄúFinalizado‚Äù com 1 toque

Visual limpo, objetivo e r√°pido

Regras de Neg√≥cio:
Status poss√≠veis: ‚ÄúAgendado‚Äù, ‚ÄúEm andamento‚Äù, ‚ÄúFinalizado‚Äù, ‚ÄúCancelado‚Äù

Ao finalizar ‚Üí gera registro financeiro

Ao cancelar ‚Üí envia notifica√ß√£o ao cliente

3. Funcionalidades Fora do Escopo do MVP
   (N√£o podem ser sugeridas nem implementadas agora)
   Programa de fidelidade

Pagamentos online

Dashboard avan√ßado de estat√≠sticas

Gest√£o de estoque

Multibarberia com gerentes (chega na V2 ou V3)

Plano de assinatura

App desktop

4. Requisitos N√£o Funcionais
   Carregar tela principal em < 2s

Fun√ß√£o ‚ÄúCriar hor√°rio‚Äù em < 3 toques

PWA leve, responsivo, com push notifications (opcional)

Database otimizado para leitura r√°pida

Interface projetada para opera√ß√£o com uma m√£o

Todo fluxo deve funcionar de 3G/4G

5. Restri√ß√£o de MVP
   Somente o essencial

Sem telas complexas

Sem fluxos longos

Foco total na Agenda e Opera√ß√£o di√°ria

6. Entreg√°veis da Fase MVP
   PWA/App com 5 blocos principais:

Agenda

Clientes

Servi√ßos

Financeiro

Painel do Barbeiro

API + DB conectados

Sistema de notifica√ß√£o WhatsApp

Testes b√°sicos

Documenta√ß√£o inicial

Documento 3 Arquitetura de Sistema (Devnex Agenda ‚Äì MVP)
Fase 1: Discovery & Escopo ‚Äî Documento T√©cnico Oficial

1. Vis√£o Geral da Arquitetura
   O Devnex Agenda ser√° constru√≠do com uma arquitetura moderna, modular e escal√°vel, priorizando:
   Alta velocidade no mobile

Baixa complexidade operacional

Redu√ß√£o m√°xima de lat√™ncia

Capacidade de incorporar automa√ß√µes inteligentes no futuro

A arquitetura adota o padr√£o Clean Architecture + Modular Services, permitindo crescimento natural para um ecossistema com IA, pagamentos e APIs externas.

2. Componentes Principais do Sistema (Vis√£o Macro)
   2.1. Frontend
   Focado em Mobile-First, dividido em:
   a) Aplicativo/PWA para Clientes
   Navega√ß√£o ultra r√°pida

Fluxo: escolher servi√ßo ‚Üí profissional ‚Üí hor√°rio ‚Üí confirmar

Login via WhatsApp (deep link / magic key)

Hist√≥rico e re-agendamento instant√¢neo

b) Aplicativo Web/Mobile para Barbeiros
Agenda inteligente

Painel do dia

Gest√£o financeira simplificada

A√ß√µes r√°pidas (one-tap)

c) Painel Admin (Web)
Cadastro de servi√ßos

Controle financeiro geral

Configura√ß√µes de equipe

Relat√≥rios m√≠nimos do MVP

Tecnologias recomendadas:
React Native OU Flutter (mobile)

React.js (pain√©is web)

PWA no cliente para reduzir custo inicial

2.2. Backend
Backend unificado, com servi√ßos desacoplados, contendo:
a) Core API
Servi√ßos de agendamento

Usu√°rios (clientes, barbeiros, admin)

Servi√ßos e pre√ßos

Regras de hor√°rio e disponibilidade

Comandos financeiros (entrada, sa√≠da, comiss√£o)

b) Notifica√ß√µes / Mensageria
Envio de mensagens via WhatsApp API

Fila ass√≠ncrona (fila de lembretes, confirma√ß√µes e cancelamentos)

Webhooks para eventos da Meta API

c) Motor de L√≥gica da Smart Agenda
Primeiro m√≥dulo de automa√ß√µes

L√≥gica inicial:

Sugerir hor√°rios prov√°veis

Preencher padr√µes repetitivos

Aprender hor√°rios mais preenchidos

Desenvolvido j√° preparado para evoluir para IA

d) Storage / Banco de Dados
PostgreSQL (recomendado)

Redis (cache e filas r√°pidas)

Migra√ß√µes via Prisma ou Sequelize

3. Arquitetura L√≥gica do MVP
   3.1. Fluxos T√©cnicos de Alto N√≠vel
   Fluxo 1 ‚Äî Agendamento do Cliente
   Cliente acessa app/PWA

Escolhe servi√ßo

Backend retorna hor√°rios dispon√≠veis

Cliente confirma

API grava agendamento

Servi√ßo de mensagens envia confirma√ß√£o via WhatsApp

Agenda do barbeiro atualiza em tempo real (via WebSockets)

Fluxo 2 ‚Äî Agenda do Barbeiro
Barbeiro acessa painel

API retorna agenda do dia

Ele edita/cria hor√°rios

API processa bloqueios, recorr√™ncias e ajustes

Agenda sincroniza com cliente

Fluxo 3 ‚Äî Financeiro Essencial
Barbeiro marca atendimento como finalizado

API registra servi√ßo conclu√≠do

Calcula comiss√£o

Atualiza caixa di√°rio

Painel Admin mostra resumo

4. Microservi√ßos ou Monolito Modular?
   Decis√£o Oficial (baseada no est√°gio MVP):
   ‚û°Ô∏è Monolito Modular + Servi√ßos Ass√≠ncronos Isolados
   Justificativa:
   Menor custo

Mais r√°pido para entregar

Reduz complexidade do deploy

Permite modularidade interna (agenda, financeiro, notifica√ß√µes)

Posteriormente, servi√ßos de:
Notifica√ß√µes

Smart Agenda/IA

Pagamentos
podem virar microservi√ßos isolados.

5. Integra√ß√µes Externas
   5.1 WhatsApp API (Meta Cloud API)
   Confirma√ß√µes

Lembretes programados via job ass√≠ncrono

Cancelamentos

Recupera√ß√£o de cliente (ex: ‚ÄúPerdeu hor√°rio?‚Äù)

5.2 Gateway de Pagamento (Futuro, mas previsto na arquitetura)
No MVP: n√£o implementado

Apenas deixar rotas e estrutura preparada

6. Seguran√ßa & Autentica√ß√£o
   MVP Autentica√ß√£o:
   Via WhatsApp (link + verifica√ß√£o simples)

Token tempor√°rio

Sem senha

Criptografia:
Dados sens√≠veis transportados via HTTPS

Tokens JWT com refresh

Permiss√µes:
Cliente

Barbeiro

Admin

Recepcionista

7. Infraestrutura e Deploy
   Infra sugerida para MVP
   Vercel / Netlify (frontend web)

AWS / Railway / Render para backend

Filas de mensagens: Redis (Upstash)

Banco: PostgreSQL (Supabase ou Neon)

Observa√ß√µes:
Prioridade total ‚Üí baixa lat√™ncia e estabilidade nas notifica√ß√µes

Deploy cont√≠nuo automatizado (CI/CD)

8. Escalabilidade (Prepara√ß√£o para o Futuro)
   O sistema j√° nasce preparado para:
   M√∫ltiplas barbearias

Expans√£o geogr√°fica

Aplicativos nativos

Automa√ß√£o avan√ßada

Funcionalidades premium (assinaturas)

Estrutura modular garantir√° evolu√ß√£o sem reescrever do zero.

9. Diretriz Central de Arquitetura
   ‚ÄúO sistema deve manter o foco total em velocidade, simplicidade e precis√£o nas opera√ß√µes da agenda e notifica√ß√µes.‚Äù
   Qualquer decis√£o t√©cnica deve:
   Reduzir fric√ß√£o

Minimizar lat√™ncia

Favorecer o uso mobile

Evitar complexidade desnecess√°ria

Preparar terreno para automa√ß√µes inteligentes

Documento 4 Requisitos T√©cnicos Detalhados do MVP
Devnex Agenda ‚Äî MVP Mobile-First para Barbearias
Fase 1 ‚Äî Discovery & Escopo
Este documento lista todos os requisitos funcionais, t√©cnicos e operacionais do MVP ‚Äî detalhados, estruturados e prontos para implementa√ß√£o.
Ele ser√° a base oficial para gera√ß√£o dos prompts do Agent DevLeader e desenvolvimento pelo Agent DevSenior.

‚úÖ 1. Estrutura Completa de Usu√°rios e Permiss√µes
1.1 Tipos de Usu√°rio
Cliente

Barbeiro

Recepcionista

Admin

1.2 Regras de Autentica√ß√£o
Todos Usu√°rios podem ter login via email/senha no Painel Web

JWT para sess√µes

Refresh tokens com expira√ß√£o longa

1.3 Permiss√µes por Tipo de Usu√°rio
Cliente
Criar agendamento

Cancelar agendamento

Receber lembretes

Ver hist√≥rico

Reagendar com 1 toque

Barbeiro
Ver agenda pr√≥pria

Criar/editar/bloquear hor√°rios

Marcar hor√°rio como conclu√≠do

Registrar servi√ßo realizado

Ver ganhos e comiss√µes

Editar pre√ßo dos servi√ßos pr√≥prios (opcional por regra admin)

Recepcionista
Criar agendamentos para clientes

Editar/cancelar hor√°rios

Registrar pagamento e finaliza√ß√£o

Gerenciar caixa di√°rio

N√£o acessa configura√ß√µes avan√ßadas

Admin
Gerenciar barbeiros

Gerenciar recepcionistas

Editar servi√ßos e pre√ßos

Ver relat√≥rio financeiro completo

Configurar regras de agenda

Configurar mensagens autom√°ticas

üìÖ 2. M√≥dulo de Agendamentos ‚Äî Requisitos Detalhados
2.1 Estrutura do Agendamento
Um agendamento cont√©m:
ID

Cliente

Barbeiro

Servi√ßo

Tempo do servi√ßo

Hor√°rio de in√≠cio

Hor√°rio final calculado

Status: agendado | confirmado | conclu√≠do | cancelado

Observa√ß√£o opcional

Valor do servi√ßo

Canal de cria√ß√£o (cliente, recepcionista, barbeiro)

2.2 Regras de Neg√≥cio
Agendamentos n√£o podem se sobrepor para o mesmo barbeiro

Hor√°rios indispon√≠veis devem ser ocultados do cliente

Bloqueios manuais do barbeiro devem refletir imediatamente

Cancelamentos devem disparar notifica√ß√£o autom√°tica

Reagendamento deve manter hist√≥rico de altera√ß√µes

Deve existir limite de cancelamento configur√°vel (ex: at√© 1h antes)

2.3 Regras da Agenda Smart (Vers√£o MVP)
Sugest√£o de hor√°rios baseados em:

Hor√°rios livres pr√≥ximos

Padr√£o de funcionamento

Servi√ßos mais comuns do barbeiro

Aprendizado simples salvo via estat√≠sticas (sem IA avan√ßada ainda)

Dois toques para o barbeiro criar agendamento:

Toca no hor√°rio

Seleciona cliente/servi√ßo

üí¨ 3. M√≥dulo de Notifica√ß√µes ‚Äî Regras T√©cnicas
3.1 Canal
Meta Cloud API (WhatsApp)

3.2 Mensagens obrigat√≥rias
Confirma√ß√£o de agendamento

Lembrete antes do hor√°rio (30min / 60min configur√°vel)

Alerta de atraso

Cancelamento

Mensagem de ‚ÄúReagendar agora‚Äù caso o cliente n√£o compare√ßa (opcional)

3.3 Regras T√©cnicas
Todas notifica√ß√µes devem ser enfileiradas no Redis

Tentativa autom√°tica de reenvio em caso de falha

Logs armazenados no banco

Webhooks devem registrar:

Mensagens entregues

Falhas

Cliques (quando dispon√≠vel)

üí≥ 4. M√≥dulo Financeiro Essencial ‚Äî Requisitos
4.1 Quando um servi√ßo √© finalizado
Registrar:

Servi√ßo

Valor

Barbeiro

Comiss√£o

Forma de pagamento (manual)

Observa√ß√£o

4.2 Caixa Di√°rio
Entradas (atendimentos)

Sa√≠das (manuais)

Saldo

Total por barbeiro

Total da barbearia

4.3 Regras de Comiss√£o
% personalizada por barbeiro

Comiss√£o calculada automaticamente

Admin pode editar regras de comiss√£o

4.4 Relat√≥rios MVP
Total di√°rio

Total semanal simples

Hist√≥rico por barbeiro

üì± 5. Frontend ‚Äî Requisitos por Interface

5.1 App/PWA Cliente
Listar servi√ßos

Listar barbeiros

Selecionar data

Selecionar hor√°rio

Confirmar agendamento

Visualizar hist√≥rico

Reagendar em 1 toque

Receber notifica√ß√µes via WhatsApp

Acesso sem senha (somente WhatsApp)

5.2 App Mobile Barbeiro
Painel do dia com lista de hor√°rios

Criar agendamento r√°pido

Editar hor√°rio

Bloquear hor√°rio

Concluir atendimento

Resumo financeiro da semana

Perfil com fotos (opcional no MVP)

Regras de UX do Barbeiro
Todas a√ß√µes principais devem ser acess√≠veis com no m√°ximo 2 toques

Hierarquia visual priorit√°ria: hor√°rios ‚Üí clientes ‚Üí a√ß√µes r√°pidas

Carregamento instant√¢neo (cache + otimiza√ß√£o)

5.3 Painel Web ‚Äî Recepcionista
Criar agendamento

Editar/cancelar

Visualizar agenda geral

Registrar finaliza√ß√£o

Gerenciar caixa di√°rio

5.4 Painel Admin
Gerenciar equipe

Gerenciar servi√ßos e pre√ßos

Configurar hor√°rios da barbearia

Ver relat√≥rios generalistas

üîß 6. Backend ‚Äî Requisitos T√©cnicos
6.1 API
REST ou GraphQL (definir no Doc 5)

Endpoints segmentados por m√≥dulo:

/auth

/cliente

/barbeiro

/recepcionista

/admin

/agendamentos

/financeiro

/notificacoes

6.2 Integra√ß√µes
WhatsApp API

Redis para filas

WebSockets para sincroniza√ß√£o ao vivo

6.3 Seguran√ßa
Tax-limiting por IP

Verifica√ß√£o do token antes de cada request

Roles obrigat√≥rios em cada rota

Auditoria de eventos cr√≠ticos

üóÑÔ∏è 7. Banco de Dados ‚Äî Requisitos
7.1 Tabelas Principais
users

barbers

clients

appointments

services

cash_flow

commissions

notifications_logs

blocked_times

settings

7.2 Regras do Banco
Todas tabelas com timestamps

Exclus√£o deve ser sempre l√≥gica (soft delete)

√çndices em campos cr√≠ticos (hor√°rios, barbeiro, status)

Hist√≥ricos sempre preservados

üöÄ 8. Performance & Requisitos N√£o Funcionais
App deve carregar em < 1s em 4G

Agendamento deve ser conclu√≠do em < 5 segundos

Notifica√ß√µes devem ser enviadas em at√© 2 segundos ap√≥s evento

Banco deve suportar 10k agendamentos/m√™s na primeira fase

Logs e auditorias must-have

üß† 9. Requisitos Futuramente Expans√≠veis (Mas j√° previstos)
N√£o ser√£o implementados agora, mas a arquitetura deve permitir:
Pagamentos no app

Assinaturas e planos

Integra√ß√£o com POS

Automa√ß√£o IA avan√ßada da agenda

Marketplace de barbeiros

Documento 5 ESPECIFICA√á√ÉO DA API (MVP)
Projeto: Devnex Agenda
Foco: API central em Node.js + NestJS, orientada a m√≥dulos, clean architecture e preparada para escalabilidade.
Base: PostgreSQL
Autentica√ß√£o: JWT (Access + Refresh Tokens)
Formato: REST (v1), com abertura futura para GraphQL.

1. Arquitetura da API
   A API ser√° organizada em m√≥dulos independentes:
   Auth

Usu√°rios (Admin, Barbeiro, Recepcionista, Cliente)

Barbearias

Servi√ßos

Agenda

Agendamentos

Financeiro

Notifica√ß√µes

Logs e Auditoria

Cada m√≥dulo possui controllers, services, repositories e DTOs.

2. Padr√µes Gerais
   Formato de resposta:

{
"success": true,
"data": {},
"message": ""
}

Pagina√ß√£o padr√£o:
?page=1&limit=20

Erros padronizados:

{
"success": false,
"error": {
"code": "RESOURCE_NOT_FOUND",
"message": "Agendamento n√£o encontrado"
}
}

Versionamento:
/api/v1/...

3. M√≥dulo Auth
   3.1 Rotas
   POST /auth/login
   Login via email/senha (Painel Web)
   Body:
   { "email": "user@dev.com", "password": "123456" }

POST /auth/refresh
Gera novo access token.
POST /auth/logout
POST /auth/mobile/whatsapp
(Opcional para cliente ‚Äî se ativado futuramente no mobile, mas n√£o obrigat√≥rio no MVP. Mantemos endpoint reservado.)

4. Usu√°rios
   Representa perfis: admin, barbeiro, recepcionista e cliente.
   4.1 Rotas
   GET /users/me
   Retorna perfil autenticado.
   POST /users
   (Admin) Cria novo usu√°rio.
   Permite criar barbeiros e recepcionistas.
   PATCH /users/:id
   Atualiza dados.
   GET /users
   Lista filtrada.
   Campos base:
   nome

telefone

email

role (admin, barbeiro, recepcionista, cliente)

status

5. Barbearias
   5.1 Rotas
   POST /barbearias
   Cria√ß√£o pelo Admin.
   GET /barbearias/:id
   PATCH /barbearias/:id
   Dados:
   Nome

Endere√ßo

Hor√°rios de funcionamento

Regras de bloqueio

Prefer√™ncias de notifica√ß√£o

6. Servi√ßos
   6.1 Rotas
   POST /servicos
   Cria servi√ßos (ex: cortes, barba, combo).
   GET /servicos
   PATCH /servicos/:id
   Campos:
   nome

dura√ß√£o (minutos)

valor

comiss√£o padr√£o (%)

7. Agenda
   M√≥dulo cr√≠tico do MVP.
   7.1 Rotas
   GET /agenda/barbeiro/:id
   Retorna hor√°rios do barbeiro.
   Par√¢metros:
   ?date=2025-01-14
   POST /agenda/bloqueios
   Cria bloqueio de agenda.
   DELETE /agenda/bloqueios/:id
   7.2 L√≥gica da Agenda Smart
   Endpoint dedicado:
   GET /agenda/barbeiro/:id/sugestoes
   Retorna:
   hor√°rios prov√°veis de encaixe

padr√µes de hor√°rios do barbeiro

repeti√ß√µes comuns

melhores hor√°rios ‚Äúlivres curtos‚Äù

8. Agendamentos
   8.1 Rotas essenciais
   POST /agendamentos
   Cria√ß√£o via cliente ou recepcionista.
   Body:
   {
   "clienteId": 1,
   "barbeiroId": 2,
   "servicoId": 3,
   "data": "2025-01-20",
   "hora": "14:00"
   }

PATCH /agendamentos/:id
Reagendamento r√°pido.
GET /agendamentos/:id
GET /agendamentos/barbeiro/:id
Lista do dia.
GET /agendamentos/cliente/:id
Hist√≥rico do cliente.
PATCH /agendamentos/:id/finalizar
Barbeiro finaliza com 1 toque.

9. Financeiro
   9.1 Rotas
   POST /financeiro/lancamentos
   Entrada ou sa√≠da.
   GET /financeiro/caixa/dia
   Caixa di√°rio.
   GET /financeiro/comissoes/:barbeiroId
   C√°lculo de comiss√µes baseado em servi√ßos finalizados.
   Campos:
   tipo (entrada/sa√≠da)

valor

refer√™ncia (servi√ßo/agendamento)

m√©todo (dinheiro, pix, cart√£o)

10. Notifica√ß√µes
    10.1 Rotas
    POST /notificacoes/whatsapp
    Envia confirma√ß√£o, lembrete ou alerta.
    Tipos:
    confirma√ß√£o imediata

lembrete

atraso/cancelamento

11. Logs & Auditoria
    11.1 Rotas
    GET /logs
    Permite auditoria por Admin.
    Registra:
    login

cria√ß√£o/edi√ß√£o de agendamento

bloqueios

finaliza√ß√µes

fluxo financeiro

12. Seguran√ßa
    JWT curto + Refresh longo

RBAC (role based access control)

Rate limit

Sanitiza√ß√£o de input

Logs estruturados

Criptografia de senha (bcrypt)

13. Erros Globais
    C√≥digo
    Descri√ß√£o
    INVALID_CREDENTIALS
    Login incorreto
    NO_PERMISSION
    Sem permiss√£o
    DATE_UNAVAILABLE
    Hor√°rio n√£o dispon√≠vel
    SERVICE_INACTIVE
    Servi√ßo desativado
    USER_INACTIVE
    Usu√°rio inativo
    INTERNAL_ERROR
    Erro inesperado

14. Performance
    Cache Redis para:

sugest√µes de agenda

hor√°rios mais acessados

dados est√°ticos (servi√ßos)

Fila BullMQ para envio de WhatsApp

Query otimizada com √≠ndices no PostgreSQL

15. Roadmap P√≥s-MVP (Reservado, n√£o implementado agora)
    GraphQL

Webhooks

Pagamento integrado

Multiunidade autom√°tica

Dashboards avan√ßados

Documento 6 FLUXOS DE USU√ÅRIO (UX FLOWS)
Projeto: Devnex Agenda
Fase: Discovery & MVP
Foco: Experi√™ncia Mobile-First para Barbeiros e Clientes
Objetivo: Mapear fluxos completos, claros e otimizados, servindo como refer√™ncia direta para telas UI e l√≥gica aplicada.

1. Usu√°rios Mapeados
   Cliente (Mobile PWA)

Barbeiro (Mobile App/PWA)

Recepcionista (Painel Web)

Admin (Painel Web)

Cada fluxo abaixo √© otimizado para minimizar toques, reduzir fric√ß√£o e acelerar a opera√ß√£o.

2. Fluxos do Cliente (PWA Mobile)

2.1 Fluxo ‚Äì Criar Agendamento
Objetivo: Agendar servi√ßo em 5‚Äì10 segundos.
Cliente abre o app

Tela inicial ‚Üí bot√£o ‚ÄúAgendar‚Äù

Seleciona Barbeiro

Seleciona Servi√ßo

Seleciona Data e Hora (somente hor√°rios livres)

Confirma agendamento

Recebe notifica√ß√£o de confirma√ß√£o via WhatsApp

Sistemas envolvidos:
Agenda

Agendamentos

Servi√ßos

Notifica√ß√µes (WhatsApp)

2.2 Fluxo ‚Äì Reagendar
Cliente abre app

Acessa ‚ÄúMeus Agendamentos‚Äù

Seleciona agendamento ativo

Clique em ‚ÄúReagendar‚Äù

Escolhe nova data/hora

Confirma

WhatsApp envia notifica√ß√£o autom√°tica

2.3 Fluxo ‚Äì Cancelar Agendamento
Cliente abre app

Acessa ‚ÄúMeus Agendamentos‚Äù

Seleciona o agendamento

Bot√£o ‚ÄúCancelar‚Äù

Confirma√ß√£o de cancelamento

WhatsApp envia aviso autom√°tico

3. Fluxos do Barbeiro (Mobile-First App/PWA)

3.1 Fluxo ‚Äì Visualizar Agenda do Dia
Abre o app ‚Üí agenda di√°ria imediatamente vis√≠vel

Lista dos hor√°rios com:

cliente

servi√ßo

status

valor

Barbeiro toca em um item para detalhes ou altera√ß√£o

3.2 Fluxo ‚Äì Criar Agendamento R√°pido
Tela da agenda

Bot√£o ‚Äú+‚Äù

Seleciona cliente (com busca r√°pida)

Seleciona servi√ßo

Hor√°rio sugerido (Agenda Smart)

sugest√µes autom√°ticas

Confirma

WhatsApp envia confirma√ß√£o

3.3 Fluxo ‚Äì Bloquear Hor√°rio
Tela da agenda

Seleciona hor√°rio

Op√ß√£o ‚ÄúBloquear per√≠odo‚Äù

Define in√≠cio e fim

Salva

3.4 Fluxo ‚Äì Finalizar Atendimento
Seleciona agendamento em andamento

Bot√£o ‚ÄúFinalizar‚Äù (1 toque)

Sistema registra:

comiss√£o

valor

pagamento (manual, se necess√°rio)

4. Fluxos do Recepcionista (Painel Web)

4.1 Fluxo ‚Äì Criar Agendamento para Cliente
Acessa painel web

Menu ‚ÄúAgenda‚Äù

Seleciona barbeiro

Clique no hor√°rio desejado

Preenche:

cliente

servi√ßo

Confirma agendamento

WhatsApp envia notifica√ß√£o

4.2 Fluxo ‚Äì Gerenciar Agenda
Filtra barbeiro

Visualiza agenda di√°ria

Pode:

cancelar

reagendar

criar

editar

bloquear hor√°rios

4.3 Fluxo ‚Äì Pagamentos / Caixa
Menu ‚ÄúFinanceiro‚Äù

Registrar entradas

Registrar sa√≠das

Ver caixa di√°rio

Ver comiss√µes

5. Fluxos do Admin (Painel Web)

5.1 Fluxo ‚Äì Criar Usu√°rios
Menu ‚ÄúUsu√°rios‚Äù

Bot√£o ‚ÄúCriar usu√°rio‚Äù

Seleciona role

Admin

Barbeiro

Recepcionista

Preenche dados

Salva

5.2 Fluxo ‚Äì Gerenciar Servi√ßos da Barbearia
Menu ‚ÄúServi√ßos‚Äù

Criar / editar / remover servi√ßos

Definir pre√ßos e dura√ß√£o

Salvar

5.3 Fluxo ‚Äì Visualizar Relat√≥rios B√°sicos
Menu ‚ÄúRelat√≥rios‚Äù

Relat√≥rio financeiro (b√°sico)

Servi√ßos mais agendados

Barbeiros com maior volume

6. Diagramas Simplificados (Texto)
   (Vers√µes gr√°ficas podem ser produzidas depois)

6.1 Fluxo Cliente ‚Äì Criar Agendamento
Home ‚Üí Selecionar Barbeiro ‚Üí Selecionar Servi√ßo ‚Üí Escolher Hor√°rio ‚Üí Confirmar ‚Üí WhatsApp

6.2 Fluxo Barbeiro ‚Äì Finalizar Atendimento
Agenda ‚Üí Selecionar Atendimento ‚Üí Finalizar ‚Üí Registrar no Financeiro

6.3 Fluxo Recepcionista ‚Äì Agendar Cliente
Agenda ‚Üí Selecionar Barbeiro ‚Üí Selecionar Hor√°rio ‚Üí Cliente + Servi√ßo ‚Üí Confirmar ‚Üí WhatsApp

6.4 Fluxo Admin ‚Äì Criar Usu√°rio
Painel Admin ‚Üí Usu√°rios ‚Üí Criar ‚Üí Role ‚Üí Salvar

7. Regras de UX Importantes (Mobile-First)
   M√°ximo de 3 a 5 toques por fluxo cr√≠tico

Sempre priorizar hor√°rio sugerido

A√ß√µes r√°pidas vis√≠veis na tela inicial

Feedback instant√¢neo (loading curto, toasts claros)

Nunca exigir cadastro burocr√°tico

Layout 100% oper√°vel com uma m√£o

Documento 7 MODELAGEM DO BANCO DE DADOS
Devnex Agenda ‚Äî MVP

1. Vis√£o Geral da Modelagem
   O banco do MVP ser√° relacional (PostgreSQL) usando Prisma ORM, com suporte total ao deploy na Vercel/Postgres ou equivalente.
   A modelagem foi constru√≠da com base em:
   Fluxos de usu√°rio

Permiss√µes (Admin, Barbeiro, Recepcionista, Cliente)

Estrutura da API

Requisitos funcionais do MVP

Arquitetura multi-tenant leve (tenant = barbearia)

2. Entidades Principais
   2.1 Usu√°rio (User)
   Representa qualquer pessoa com acesso ao sistema (Admin, Barbeiro, Recepcionista, Cliente).
   Campos principais
   id

name

email

password (hash)

role (enum: ADMIN, BARBER, RECEPTIONIST, CLIENT)

phone

createdAt

updatedAt

2.2 Barbearia (Barbershop)
Unidade principal do sistema.
Campos
id

name

address

ownerId (Admin)

createdAt

Relacionamentos
1 Admin ‚Üí muitas barbearias

1 barbearia ‚Üí v√°rios barbeiros

1 barbearia ‚Üí v√°rios recepcionistas

1 barbearia ‚Üí v√°rios clientes (que agendam nela)

2.3 Servi√ßos (Service)
Servi√ßos oferecidos pela barbearia.
Campos
id

barbershopId

name

durationMinutes

price

createdAt

2.4 Barbeiro (Barber)
Liga√ß√£o entre usu√°rio e barbearia.
Campos
id

userId

barbershopId

createdAt

Relacionamento
1 Barbeiro pertence a 1 barbearia

Agenda vinculada ao barbeiro

2.5 Agenda / Hor√°rios (Schedule)
Estrutura dos hor√°rios dispon√≠veis do barbeiro.
Campos
id

barberId

dayOfWeek (0‚Äì6)

startTime

endTime

createdAt

2.6 Hor√°rios Bloqueados (BlockedTime)
Barbeiro pode bloquear parte da agenda (f√©rias, intervalo, folga).
Campos
id

barberId

start

end

reason

2.7 Clientes (Customer)
Cliente atrelado √† barbearia (pode existir sem login).
Campos
id

name

phone

email?

createdAt

2.8 Agendamentos (Appointment)
Cora√ß√£o do MVP.
Campos
id

barbershopId

barberId

customerId

serviceId

date

start

end

status (enum: PENDING, CONFIRMED, CANCELED, DONE)

createdAt

2.9 Logs de Atividade (ActivityLog)
Para auditoria b√°sica no MVP.
Campos
id

userId?

action

description

createdAt

3. Diagrama Relacional (Texto Estruturado)
   User (1) --- (N) Barbershop (via ownerId)
   User (1) --- (1) Barber --- (N) Schedule
   ‚îî--- (N) BlockedTime
   Barbershop (1) --- (N) Service
   Barbershop (1) --- (N) Customer
   Barber (1) --- (N) Appointment
   Customer (1) --- (N) Appointment
   Service (1) --- (N) Appointment

4. Enums
   UserRole
   ADMIN

BARBER

RECEPTIONIST

CLIENT

AppointmentStatus
PENDING

CONFIRMED

CANCELED

DONE

5. Modelo Prisma (vers√£o MVP inicial)
   (Formato direto para implementa√ß√£o)
   model User {
   id String @id @default(uuid())
   name String
   email String @unique
   password String
   phone String?
   role UserRole
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt

Barber Barber?
Barbershops Barbershop[] @relation("OwnerShops")
}

model Barbershop {
id String @id @default(uuid())
name String
address String?
ownerId String
createdAt DateTime @default(now())

owner User @relation("OwnerShops", fields: [ownerId], references: [id])
services Service[]
barbers Barber[]
customers Customer[]
appointments Appointment[]
}

model Service {
id String @id @default(uuid())
barbershopId String
name String
durationMinutes Int
price Float
createdAt DateTime @default(now())

barbershop Barbershop @relation(fields: [barbershopId], references: [id])
appointments Appointment[]
}

model Barber {
id String @id @default(uuid())
userId String
barbershopId String
createdAt DateTime @default(now())

user User @relation(fields: [userId], references: [id])
barbershop Barbershop @relation(fields: [barbershopId], references: [id])
schedules Schedule[]
blockedTimes BlockedTime[]
appointments Appointment[]
}

model Schedule {
id String @id @default(uuid())
barberId String
dayOfWeek Int
startTime String
endTime String
createdAt DateTime @default(now())

barber Barber @relation(fields: [barberId], references: [id])
}

model BlockedTime {
id String @id @default(uuid())
barberId String
start DateTime
end DateTime
reason String?
createdAt DateTime @default(now())

barber Barber @relation(fields: [barberId], references: [id])
}

model Customer {
id String @id @default(uuid())
barbershopId String
name String
phone String
email String?
createdAt DateTime @default(now())

barbershop Barbershop @relation(fields: [barbershopId], references: [id])
appointments Appointment[]
}

model Appointment {
id String @id @default(uuid())
barbershopId String
barberId String
customerId String
serviceId String
date DateTime
start DateTime
end DateTime
status AppointmentStatus
createdAt DateTime @default(now())

barbershop Barbershop @relation(fields: [barbershopId], references: [id])
barber Barber @relation(fields: [barberId], references: [id])
customer Customer @relation(fields: [customerId], references: [id])
service Service @relation(fields: [serviceId], references: [id])
}

model ActivityLog {
id String @id @default(uuid())
userId String?
action String
description String?
createdAt DateTime @default(now())
}

enum UserRole {
ADMIN
BARBER
RECEPTIONIST
CLIENT
}

enum AppointmentStatus {
PENDING
CONFIRMED
CANCELED
DONE
}

6. Considera√ß√µes T√©cnicas Importantes
   Compat√≠vel com deploy na Vercel.

Estrutura leve e escal√°vel para multi-barbeiros e multi-barbeirias.

Suporta autentica√ß√£o unificada (email/senha) para todos usu√°rios.

Atende todos fluxos do Documento 6.

7. Conclus√£o
   A modelagem est√° s√≥lida, alinhada e pronta para implementa√ß√£o imediata no MVP.

Documento 8 Plano de Desenvolvimento (Roadmap T√©cnico)
Devnex Agenda ‚Äî MVP Mobile-First para Barbearias

1. Objetivo do Documento
   Definir um roadmap t√©cnico completo, organizado em etapas l√≥gicas de desenvolvimento, garantindo velocidade, previsibilidade, rastreabilidade e fidelidade total ao escopo e UX definidos.
   O plano √© estruturado para permitir que o DevLeader ‚Üí DevSenior trabalhem em ciclos curtos, entregas cont√≠nuas e m√°xima efici√™ncia.

2. Metodologia de Produ√ß√£o
   Estrat√©gia: Incremental + Mobile-First + API-First

Base:

Primeiro a API m√≠nima funcionando

Depois telas essenciais do barbeiro

Depois fluxo do cliente

Depois m√≥dulos de automa√ß√£o e financeiro

Ciclos:
Sprints curtas de 3‚Äì5 dias

3. Fases do Desenvolvimento (Roadmap T√©cnico)

Fase 1 ‚Äî Foundation (Infra + Auth + Projeto Base)
Dura√ß√£o estimada: 3‚Äì5 dias
üîß Entregas t√©cnicas:
Criar monorepo (ou repos separados) configurados na Vercel

Criar API base (Node / Next.js Server Actions / Prisma)

Criar estrutura inicial de banco (usu√°rios, barbeiros, clientes, servi√ßos, hor√°rios)

Implementar:

Login email/senha (todas categorias de usu√°rio no painel web)

Login WhatsApp para clientes (PWA)

Configura√ß√£o de seguran√ßa:

Middlewares de autentica√ß√£o

RBAC inicial (Admin, Barbeiro, Recepcionista, Cliente)

üéØ Objetivo:
Ter o esqueleto funcionando.

Fase 2 ‚Äî Agenda do Barbeiro (Core do MVP)
Dura√ß√£o: 7‚Äì10 dias
üîß Entregas:
Tela ‚ÄúAgenda Smart‚Äù mobile-first

Fluxo 1.1 (ver agenda)

Fluxo 1.2 (criar hor√°rio)

Fluxo 1.3 (editar hor√°rio)

Bloqueios, recorr√™ncias b√°sicas

Tela Lista do Dia

Tela Detalhes do Agendamento

Fun√ß√£o ‚ÄúFinalizar Servi√ßo‚Äù

üîó Integra√ß√£o essencial:
Webhooks WhatsApp:

confirma√ß√£o

lembrete

atraso/cancelamento

üéØ Objetivo:
Entregar a experi√™ncia ultra-r√°pida do barbeiro, o cora√ß√£o do Devnex Agenda.

Fase 3 ‚Äî Agendamento do Cliente (PWA/App)
Dura√ß√£o: 6‚Äì9 dias
üîß Entregas:
Tela escolha do profissional

Tela escolha do servi√ßo

Tela escolha do hor√°rio

Tela de confirma√ß√£o

Hist√≥rico do cliente

Reagendamento

Cancelamento

Notifica√ß√µes WhatsApp correspondentes

üéØ Objetivo:
Cliente cria um agendamento em 5‚Äì10 segundos.

Fase 4 ‚Äî M√≥dulo Financeiro Essencial
Dura√ß√£o: 4‚Äì6 dias
üîß Entregas:
Registro de servi√ßos finalizados

C√°lculo autom√°tico de comiss√µes

Controle financeiro di√°rio

Relat√≥rios simples (Entradas/Sa√≠das)

Export CSV b√°sico

üéØ Objetivo:
Funcionalidades m√≠nimas para gest√£o do sal√£o.

Fase 5 ‚Äî Pain√©is (Admin, Recepcionista, Barbeiro Web)
Dura√ß√£o: 4‚Äì7 dias
üîß Entregas:
Dashboard Admin

Gerenciamento de profissionais

Gerenciamento de servi√ßos

Controle administrativo de agenda

Recepcionista agenda para clientes (web)

üéØ Objetivo:
Completar camada de controle operacional.

Fase 6 ‚Äî Estabiliza√ß√£o + QA + Ajustes de UX
Dura√ß√£o: 3‚Äì6 dias
üîß Entregas:
Testes e valida√ß√£o de todos os fluxos

Corre√ß√µes de layout mobile-first

Ajustes finos de performance

Ajustes finos de experi√™ncia do cliente

Relat√≥rios de QA (testes manuais + automa√ß√£o leve)

üéØ Objetivo:
Garantir que o MVP esteja pronto para produ√ß√£o.

Fase 7 ‚Äî Deploy Final + Observabilidade
Dura√ß√£o: 2‚Äì3 dias
üîß Entregas:
Deploy API e front na Vercel

Configura√ß√µes finais de env

Logs b√°sicos

Monitoramento de erros

Setup de backups do banco

üéØ Objetivo:
Disponibilizar o MVP para uso real.

4. Roadmap Completo (Resumo Visual)
   Fase
   Entrega Principal
   Status
   1
   Auth + DB + Infra
   üîú
   2
   Agenda Smart Barbeiro
   üîú
   3
   Agendamento do Cliente
   üîú
   4
   Financeiro
   üîú
   5
   Pain√©is Web
   üîú
   6
   QA + Ajustes
   üîú
   7
   Deploy Final
   üîú

5. Crit√©rios de Aceite do Roadmap
   Todos os fluxos do Documento 6 implementados exatamente como descritos

API cumprindo integralmente o Documento 5

Requisitos t√©cnicos (Documento 4) atendidos sem desvios

Modelagem do banco (Documento 7) aplicada fielmente

Todos os perfis de usu√°rio funcionando conforme permiss√µes

6. Depend√™ncias Entre Entregas
   A Agenda do Barbeiro depende totalmente da Fase 1

O Agendamento do Cliente depende das APIs e l√≥gicas da Fase 2

O Financeiro depende de finaliza√ß√£o de servi√ßos

Pain√©is dependem de estrutura completa de dados

Deploy final depende da estabilidade p√≥s-QA

Documento 9 Plano de Testes e QA do MVP
Devnex Agenda ‚Äî Garantia de Qualidade e Estabiliza√ß√£o

1. Objetivo do Documento
   Definir o plano completo de testes do MVP do Devnex Agenda, garantindo:
   funcionamento correto de todas as funcionalidades essenciais,

experi√™ncia mobile-first consistente,

confiabilidade da API e banco de dados,

preven√ß√£o de regress√µes,

estabilidade para deploy em produ√ß√£o.

Este documento ser√° refer√™ncia para teste manual, automatizado e valida√ß√£o final.

2. Estrat√©gia Geral de Testes
   Testes manuais guiados ‚Üí foco em UX, usabilidade e fluxo real do barbeiro e cliente

Testes automatizados essenciais ‚Üí l√≥gica de neg√≥cio cr√≠tica

Testes explorat√≥rios ‚Üí descoberta de inconsist√™ncias

Testes mobile-first ‚Üí validar cada tela em tamanhos comuns de celular

Testes de API ‚Üí Postman / Thunder Client

Teste end-to-end m√≠nimo ‚Üí nos fluxos principais

N√£o ser√° priorizado: testes unit√°rios extensos (extrapola o MVP).

3. Escopo dos Testes
   3.1 Fluxos do Barbeiro (Mobile First)
   Ver Agenda Smart

Criar hor√°rio

Editar hor√°rio

Bloquear hor√°rio

Criar recorr√™ncia

Finalizar servi√ßo

Ver lista do dia

Navega√ß√£o r√°pida

Funcionamento em 4G limitado

3.2 Fluxos do Cliente (PWA/App)
Selecionar profissional

Selecionar servi√ßo

Selecionar hor√°rio

Confirmar agendamento

Receber confirma√ß√£o (WhatsApp)

Reagendar

Cancelar

Ver hist√≥rico

Fluxo completo em 5‚Äì10 segundos

3.3 Fluxos da Recepcionista
Criar agendamento para cliente

Editar hor√°rio

Cancelar

Ver agenda do dia

Buscar cliente

3.4 Fluxos do Admin
Gerenciar profissionais

Gerenciar servi√ßos

Ver painel financeiro

Ajustar permiss√µes

4. Testes de API (Documento 5)
   Testes essenciais:
   Autentica√ß√£o e RBAC

CRUD de usu√°rios

CRUD de servi√ßos

CRUD de hor√°rios

Finaliza√ß√£o de servi√ßos

C√°lculo de comiss√£o

Relat√≥rios (financeiro)

Webhooks WhatsApp

Ferramenta sugerida: Postman Collection gerada automaticamente.

5. Testes de Banco de Dados
   Integridade dos relacionamentos

Cascata correta em deletes onde aplic√°vel

Checagem de √≠ndices

Valida√ß√£o de unique constraints

Teste de consist√™ncia nos status de agendamento

6. Testes de Performance
   Abrir agenda do barbeiro < 500ms

Criar agendamento < 1.5s

Tela do cliente carregando < 1s

Consultar API /horarios em carga moderada

Testes em rede fraca

7. Testes de Seguran√ßa
   RBAC funcionando 100%

Bloqueio de acessos n√£o autorizados

Valida√ß√£o de tokens

Sanitiza√ß√£o de entradas da API

Tentativas de brute force limitadas

8. Testes de Integra√ß√£o com WhatsApp
   Confirmar:
   Mensagem enviada ap√≥s criar agendamento

Mensagem de lembrete

Mensagem de atraso

Mensagem de cancelamento

Erros esperados:
quedas de webhook

rate limit

falha na API externa

O sistema deve:
logar falhas

tentar novamente

notificar admin em erro cr√≠tico

9. Testes de UX
   Mobile-first:
   Teclado n√£o cobrindo inputs

Bot√µes toc√°veis facilmente

Zero polui√ß√£o visual

Navega√ß√£o clara (2‚Äì3 toques max)

Clientes:
Agendamento r√°pido

Clareza de etapas

Confirma√ß√£o √≥bvia

Barbeiro:
Performance m√°xima

Agenda ‚Äúrespirando‚Äù bem

Evitar telas desnecess√°rias

10. Testes End-to-End Cr√≠ticos
    Teste E2E 1 ‚Äî Barbeiro cria hor√°rio
    Teste E2E 2 ‚Äî Cliente agenda sozinho
    Teste E2E 3 ‚Äî Barbeiro finaliza servi√ßo
    Teste E2E 4 ‚Äî Financeiro registra comiss√£o
    Teste E2E 5 ‚Äî Cliente remarca
    Teste E2E 6 ‚Äî Notifica√ß√£o WhatsApp flui corretamente
    Ferramenta recomendada: Playwright (m√≠nimo vi√°vel).

11. Processo de QA Antes do Deploy
    Desenvolvedor conclui fase

DevLeader valida

QA manual segue checklist

Bugs documentados

Corre√ß√µes aplicadas

Repetir at√© ‚ÄúQualidade Aceit√°vel‚Äù

Deploy para staging na Vercel

Teste final com cliente real (1 barbeiro parceiro)

Deploy produ√ß√£o

12. Checklist Oficial para Garantia de Qualidade
    Funcionalidades Core:
    Agenda Smart funcionando 100%

Cliente agenda sem fric√ß√£o

WhatsApp funcionando

Finaliza√ß√£o funcionando

Financeiro est√°vel

Dados e Performance:
Banco consistente

API r√°pida

PWA r√°pido

Pain√©is sem erros

Usabilidade:
Mobile perfeito

UX comprovada com testes r√°pidos

Fluxos sem travas

13. Crit√©rios de Aceite do MVP
    O MVP s√≥ ser√° considerado pronto para produ√ß√£o quando:
    Todos os testes deste documento forem aprovados

Todos os fluxos do Documento 6 funcionarem

Nenhum bug cr√≠tico ou impeditivo existir

WhatsApp estiver operacional

Agenda Smart estiver r√°pida (<500ms)

Cliente conseguir agendar em <10s

Financeiro calcular comiss√µes corretamente

Documento 10 Guia de Deploy, Infra e Observabilidade

1. Vis√£o Geral
   Este documento descreve como o MVP do Dexnex Barber Ops ser√° implantado, configurado, monitorado e mantido em produ√ß√£o.
   A abordagem prioriza:
   Simplicidade operacional

Deploy r√°pido (ideal para MVP)

Infraestrutura Vercel + NeonDB + servi√ßos serverless

Observabilidade m√≠nima funcional

Alt√≠ssima compatibilidade com arquitetura do Documento 3

2. Infraestrutura de Deploy
   2.1 Front-end Web (Painel Admin / Painel Recepcionista / Painel Barbeiro)
   Hosting: Vercel

Framework: Next.js 15 (App Router)

Edge Network: CDN global da Vercel

Build & Deploy Autom√°tico via:

GitHub PR ‚Üí Preview URL

Merge para main ‚Üí Produ√ß√£o

Configura√ß√µes Importantes
Vari√°veis de ambiente definidas na Vercel (produ√ß√£o + preview)

Cache de build ativado

Middleware de autentica√ß√£o no edge habilitada

2.2 Back-end API (Next.js no mesmo repo)
Implementa√ß√£o conforme Documento 5:
Runtime: Vercel Serverless Functions

Linguagem: Node 18+

Handlers REST e Webhooks

Liveness autom√°tico pela plataforma

Vantagens para MVP
Zero DevOps

Escala autom√°tica

Sem custo extra no in√≠cio

Logs integrados

2.3 Banco de Dados
NeonDB (PostgreSQL Serverless)

Branch principal: main

Branch de preview: shadow branch autom√°tico

Prisma ORM com:

Migra√ß√µes via prisma migrate deploy

Seed para ambiente de staging

Configura√ß√µes
Pooling habilitado via Neon

SSL required

Min/Max connections ~100 (suficiente para MVP)

2.4 Storage
Para imagens e assets enviados por barbearias ou barbeiros:
Vercel Blob (ideal p/ MVP)

Upload direto do client ‚Üí signed URLs

Expans√£o futura poss√≠vel p/ Cloudflare R2 ou Supabase Storage

3. Entrega Cont√≠nua (CI/CD)
   Fluxo:
   Push ‚Üí GitHub

Vercel cria preview autom√°tico

Testes de API (Documento 9) executam no pipeline

Se aprovado: merge na main

Deploy autom√°tico em produ√ß√£o

Prote√ß√µes
Deploy em produ√ß√£o somente via main

Previews validados antes de merge

4. Configura√ß√£o de Ambientes
   Ambiente
   Objetivo
   Infra
   Local
   Desenvolvimento, testes
   Node, Prisma, Docker opcional
   Preview
   Valida√ß√£o de PRs
   Vercel Preview + Neon Shadow DB
   Produ√ß√£o
   Usu√°rios reais
   Vercel Production + Neon Main DB

5. Observabilidade e Monitoramento
   5.1 Logs
   Vercel Logs para Serverless Functions

Captura autom√°tica de erros no Edge e no Serverless

Filtros por rota, status e tempo de execu√ß√£o

5.2 M√©tricas
Tempo de resposta das rotas

Erros 5xx

Picos de lat√™ncia

Consumo de DB (Neon)

Ferramentas:
Vercel Analytics

Neon Project Dashboard

5.3 Alertas
Para MVP: simples e eficaz.
Erros 5xx acima de 5/min ‚Üí alerta manual via e-mail

Falha de deploy ‚Üí notifica√ß√£o GitHub

NeonDB CPU/IO acima de 90% ‚Üí alerta autom√°tico da Neon

6. Seguran√ßa
   6.1 Autentica√ß√£o
   JWT baseado em rota (conforme Documento 5)

Refresh tokens no serverless

6.2 Network
Todos servi√ßos via HTTPS

Banco com IP-free connection + TLS

6.3 Segredos
Armazenados somente:
Vercel Environment Variables

Nunca commitados

7. Backups e Disaster Recovery
   7.1 Banco de Dados
   Neon fornece:
   Point-in-time recovery

Snapshots autom√°ticos

Reten√ß√£o padr√£o suficiente para MVP

7.2 Storage
Replica√ß√£o autom√°tica em m√∫ltiplas regi√µes (Vercel Blob)

7.3 Estrat√©gia de Recupera√ß√£o
Restaurar snapshot Neon

Rebuild autom√°tico no Vercel

Re-hidratar storage se necess√°rio

8. Escalabilidade
   MVP escala automaticamente, pois:
   API √© serverless

Front √© edge/CDN global

NeonDB escala vertical + horizontal conforme carga

Para cargas mais altas no futuro:
Cache Redis (Upstash)

Filas (Vercel Queues)

Worker dedicado (Vercel Cron Jobs)

9. Checklist de Deploy
   Antes do deploy:
   Vari√°veis de ambiente configuradas

Prisma migrate deploy aplicado

Todos endpoints testados (Doc 9)

CDN warm-up opcional

Testes de login e roles corretamente funcionando

P√≥s deploy:
Validar produtividade do admin e recep√ß√£o

Validar agendamentos e notifica√ß√µes

Monitorar logs por 48h
